<!-- This file contains the HTML structure and JavaScript for displaying dashboard metrics.
     It includes a table to show total stock, change in stock, sales, and items below stock of 10.
     The data is fetched from an API endpoint and populated into the table. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Metrics</title>
    <!-- Link to common CSS styles -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/common.css') }}">
</head>
<body>
<div class="dashboard-metrics">
    <table class="metrics-table">
        <thead>
        <tr>
            <th>Total Stock</th>
            <th>Change in Stock</th>
            <th>Sales</th>
            <th>Items Below Stock of 10</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td id="total_stock"></td>
            <td id="stock_change"></td>
            <td id="sales"></td>
            <td id="low_stock_count"></td>
        </tr>
        </tbody>
    </table>
</div>

<script>
    // Fetch and display dashboard metrics when the document is fully loaded
    document.addEventListener('DOMContentLoaded', function () {
        fetch('/api/dashboard_metrics')
            .then(response => response.json())
            .then(data => {
                // Populate the table with the fetched data
                document.getElementById('total_stock').textContent = data.total_stock;
                document.getElementById('stock_change').textContent = data.stock_change;
                document.getElementById('sales').textContent = data.sales;
                document.getElementById('low_stock_count').textContent = data.low_stock_count;
            })
            .catch(error => console.error('Error fetching dashboard metrics:', error));
    });
</script>
</body>
</html>